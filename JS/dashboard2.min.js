var LastUpdatedOnGlobal=moment().format("MMMM Do YYYY, h:mm:ss");function ShowTime(){var e=(new Date).toLocaleTimeString("en-GB");$("#div_time").text("TIME: "+e),window.setTimeout("ShowTime()",1e3)}function CallToAPI(){$.ajax({type:"GET",url:"https://api.covid19india.org/data.json",dataType:"json",success:function(e,a,t){var r=e.statewise[0].lastupdatedtime;DynamicTable(CreateWeatherJson(e),r),ty=ForGraph(e),PlotGraph(ty),ui=PlotTested(e),PlotTestedHighchart(ui)},error:function(e,a,t){console.log("Error: "+a+" "+t+" "+e.status+" "+e.statusText)}})}function ForGraph(e){for(var a="",t=e.cases_time_series.length-1;t>0&&(dailyconfirmed=e.cases_time_series[t].dailyconfirmed,dailydeceased=e.cases_time_series[t].dailydeceased,dailyrecovered=e.cases_time_series[t].dailyrecovered,date=e.cases_time_series[t].date,totalconfirmed=e.cases_time_series[t].totalconfirmed,totaldeceased=e.cases_time_series[t].totaldeceased,totalrecovered=e.cases_time_series[t].totalrecovered,a=(a=(a=(a=(a=(a=(a=(a+="{")+'"date": "'+date.concat("2020")+'",')+'"dailyconfirmed": '+dailyconfirmed+",")+'"dailydeceased": '+dailydeceased+",")+'"dailyrecovered": '+dailyrecovered+",")+'"totalconfirmed": '+totalconfirmed+",")+'"totaldeceased": '+totaldeceased+",")+'"totalrecovered": '+totalrecovered,a+="},",30!=t);t--);return"["+a.slice(0,a.length-1)+"]"}function CreateWeatherJson(e){var a="";for(i=0;i<e.statewise.length;i++)e.statewise[i].confirmed>0&&(State=e.statewise[i].state,StateCode=e.statewise[i].statecode,Active=e.statewise[i].active,Confirmed=e.statewise[i].confirmed,Recovered=e.statewise[i].recovered,Deceased=e.statewise[i].deaths,ConfirmedDelta=e.statewise[i].deltaconfirmed,RecoveredDelta=e.statewise[i].deltarecovered,DeceasedDelta=e.statewise[i].deltadeaths,a=(a=(a=(a=(a=(a=(a=(a=(a=(a+="{")+'"State": "'+State+'",')+'"StateCode": "'+StateCode+'",')+'"Active": '+Active+",")+'"Confirmed": '+Confirmed+",")+'"Recovered": '+Recovered+",")+'"ConfirmedDelta": '+ConfirmedDelta+",")+'"RecoveredDelta": '+RecoveredDelta+",")+'"DeceasedDelta": '+DeceasedDelta+",")+'"Deceased": '+Deceased,a+="},");return"["+a.slice(0,a.length-1)+"]"}function DynamicTable(e,a){var t=JSON.parse(e);PieChart(t),$("#HeaderDiv").append(HeaderDiv(t));var r="";r+=FirstTable(t),$("#weatherTable").append(r),LastUpdatedOnGlobal=a,$("#lbl2").text("LAST UPDATED : "+a),sessionStorage.setItem("lastupdated",a),$("#DynamicTable").DataTable({paging:!1,order:[[2,"desc"]],searching:!1,info:!1,columnDefs:[{targets:[1,3,4],orderable:!1}]})}function HeaderDiv(e){var a="";return a+='<table class="table table-border table-hover">',a+="<thead>",a+="<tr>",a+="<th class='State header' style='color: red; text-align: center' Key='CONFIRMED'>CONFIRMED</th>",a+="<th class='State header' style='color: blue; text-align: center' key='ACTIVE'>ACTIVE</th>",a+="<th class='State header' style='color: green; text-align: center' key ='RECOVERED'>RECOVERED</th>",a+="<th class='State header' style='color: grey; text-align: center' key = 'DECEASED'>DECEASED</th>",a+="</tr>",a+="</thead>",a+="<tbody>",a+="<tr>",a+=" <td style='text-align:center' class = 'colortake'>",e[0].ConfirmedDelta>0&&(a+=" <span clas='header'  style='color: rgb(255, 7, 58);'>",a+=" [+"+NumbersInCommaSeperated(e[0].ConfirmedDelta)+"]</span>"),a+=" "+NumbersInCommaSeperated(e[0].Confirmed)+"</td>",a+=" <td class = 'colortake1'>",e[0].ActiveDelta>0&&(a+=" <span clas='header' style='color:#0000ff;'>",a+=" <svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><line x1='12' y1='19' x2='12' y2='5'></line><polyline points='5 12 12 5 19 12'></polyline></svg>",a+=" [0]</span>"),a+=" "+NumbersInCommaSeperated(e[0].Active)+"</td>",a+=" <td class = 'colortake2'>",e[0].RecoveredDelta>0&&(a+=" <span  clas='header' style='color: rgb(0,128,0);'>",a+=" [+"+e[0].RecoveredDelta+"]</span>"),a+=" "+NumbersInCommaSeperated(e[0].Recovered)+"</td>",a+=" <td class = 'colortake3'>",e[0].DeceasedDelta>0&&(a+=" <span clas='header' style='color: rgb(128, 128, 128);'>",a+=" [+"+e[0].DeceasedDelta+"]</span>"),a+=" "+NumbersInCommaSeperated(e[0].Deceased)+"</td>",a+="</tr>",a+=" </tbody>",a+=" </table>"}function FirstTable(e){var a="";a+='<table id="DynamicTable" class="table table-striped table-light" >',a+="<thead>",a+="<tr>",a+='<th class="State header" id="State"style="cursor: pointer;"  key="STATE">STATE/UT</th>',a+='<th class="State header" id="Cnfmd" key="CONFIRMED" style="color:red">CONFIRMED</th>',a+='<th class="State header" id="Actv" style="cursor: pointer;color:blue"  key="ACTIVE">ACTIVE</th>',a+='<th class="State header" id = "Rcvrd" key="RECOVERED" style="color:green">RECOVERED</th>',a+='<th class="State header" id="Dcsd" key="DECEASED" style="color:grey">DECEASED</th>',a+="</tr>",a+="</thead>",a+="<tbody>";for(var t=1;t<e.length;t++)a+="<tr>",a+=' <td ><a class="State" key="'+e[t].State+'" target ="_blank" href="States.html?'+e[t].StateCode+'">'+e[t].State+" </a></td>",a+=" <td class='data'>",e[t].ConfirmedDelta>0&&(a+=" <span  style='color: rgb(255, 7, 58);'>",a+=" <svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><line x1='12' y1='19' x2='12' y2='5'></line><polyline points='5 12 12 5 19 12'></polyline></svg>",a+=" "+NumbersInCommaSeperated(e[t].ConfirmedDelta)+"</span>"),a+=" "+NumbersInCommaSeperated(e[t].Confirmed)+"</td>",a+=" <td>"+NumbersInCommaSeperated(e[t].Active)+"</td>",a+=" <td>",e[t].RecoveredDelta>0&&(a+=" <span  style='color: rgb(0, 255, 0);'>",a+=" <svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><line x1='12' y1='19' x2='12' y2='5'></line><polyline points='5 12 12 5 19 12'></polyline></svg>",a+=" "+NumbersInCommaSeperated(e[t].RecoveredDelta)+"</span>"),a+=" "+NumbersInCommaSeperated(e[t].Recovered)+"</td>",a+=" <td>",e[t].DeceasedDelta>0&&(a+=" <span  style='color: rgb(128, 128, 128);'>",a+=" <svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><line x1='12' y1='19' x2='12' y2='5'></line><polyline points='5 12 12 5 19 12'></polyline></svg>",a+=" "+e[t].DeceasedDelta+"</span>"),a+=" "+NumbersInCommaSeperated(e[t].Deceased)+"</td>",a+="</tr>";return a+=" </tbody>",a+=" </table>"}$(document).ready(function(){CallToAPI(),ShowTime()});var arrLang={en:{Maharashtra:"Maharashtra","Tamil Nadu":"Tamil Nadu",Delhi:"Delhi",Telangana:"Telangana",Rajasthan:"Rajasthan",Kerala:"Kerala","Uttar Pradesh":"Uttar Pradesh","Andhra Pradesh":"Andhra Pradesh","Madhya Pradesh":"Madhya Pradesh",Karnataka:"Karnataka",Gujarat:"Gujarat",Haryana:"Haryana","Jammu and Kashmir":"Jammu and Kashmir",Punjab:"Punjab","West Bengal":"West Bengal",Odisha:"Odisha",Bihar:"Bihar",Uttarakhand:"Uttarakhand",Assam:"Assam",Chandigarh:"Chandigarh","Himachal Pradesh":"Himachal Pradesh",Ladakh:"Ladakh","Andaman and Nicobar Islands":"Andaman and Nicobar Islands",Chhattisgarh:"Chhattisgarh",Goa:"Goa",Puducherry:"Puducherry",Jharkhand:"Jharkhand",Manipur:"Manipur",Mizoram:"Mizoram","Arunachal Pradesh":"Arunachal Pradesh","Dadra and Nagar Haveli":"Dadra and Nagar Haveli",Tripura:"Tripura","Daman and Diu":"Daman and Diu",Lakshadweep:"Lakshadweep",Meghalaya:"Meghalaya",Nagaland:"Nagaland",Sikkim:"Sikkim",STATE:"STATE",CONFIRMED:"CONFIRMED",ACTIVE:"ACTIVE",RECOVERED:"RECOVERED",DECEASED:"DECEASED","INDIA COVID-19 TRACKER":"INDIA COVID-19 TRACKER",LastUpdated:"LAST UPDATED "+LastUpdatedOnGlobal,Time:"TIME"},km:{Maharashtra:"महाराष्ट्र","Tamil Nadu":"तमिलनाडु",Delhi:"दिल्ली",Telangana:"तेलंगाना",Rajasthan:"राजस्थान",Kerala:"केरल","Uttar Pradesh":"उत्तर प्रदेश","Andhra Pradesh":"आंध्र प्रदेश","Madhya Pradesh":"मध्य प्रदेश",Karnataka:"कर्नाटक",Gujarat:"गुजरात",Haryana:"हरियाणा","Jammu and Kashmir":"जम्मू और कश्मीर",Punjab:"पंजाब","West Bengal":"पश्चिम बंगाल",Odisha:"ओडिशा",Bihar:"बिहार",Uttarakhand:"उत्तराखंड",Assam:"असम",Chandigarh:"चंडीगढ़","Himachal Pradesh":"हिमाचल प्रदेश",Ladakh:"लद्दाख","Andaman and Nicobar Islands":"अंडमान व नोकोबार द्वीप समूह",Chhattisgarh:"छत्तीसगढ़",Goa:"गोवा",Puducherry:"पुडुचेरी",Jharkhand:"झारखंड",Manipur:"मणिपुर",Mizoram:"मिजोरम","Arunachal Pradesh":"अरुणाचल प्रदेश","Dadra and Nagar Haveli":"दादरा और नगर हवेली",Tripura:"त्रिपुरा","Daman and Diu":"दमन और दीव",Lakshadweep:"लक्षद्वीप",Meghalaya:"मेघालय",Nagaland:"नगालैंड",Sikkim:"सिक्किम",STATE:"राज्य",CONFIRMED:"पॉजिटिव",ACTIVE:"सक्रिय",RECOVERED:"डिस्चार्ज",DECEASED:"मौत","INDIA COVID-19 TRACKER":"भारत COVID-19 ट्रेकर",LastUpdated:"आखरी अपडेट "+LastUpdatedOnGlobal,Time:"समय"},Punjabi:{Maharashtra:"ਮਹਾਰਾਸ਼ਟਰ","Tamil Nadu":"ਤਮਿਲ ਨਾਡੂ",Delhi:"ਦਿੱਲੀ",Telangana:"ਤੇਲੰਗਾਨਾ",Rajasthan:"ਰਾਜਸਥਾਨ",Kerala:"ਕੇਰਲਾ","Uttar Pradesh":"ਉੱਤਰ ਪ੍ਰਦੇਸ","Andhra Pradesh":"ਆਂਧਰਾ ਪ੍ਰਦੇਸ਼","Madhya Pradesh":"ਮਧਿਆ ਪ੍ਰਦੇਸ",Karnataka:"ਕਾਰਨਾਟਕ",Gujarat:"ਗੁਜਰਾਤ",Haryana:"ਹਰਿਆਣਾ","Jammu and Kashmir":"ਜੰਮੂ ਅਤੇ ਕਸ਼ਮੀਰ",Punjab:"ਪੰਜਾਬ","West Bengal":"ਪੱਛਮੀ ਬੰਗਾਲ",Odisha:"ਓਡੀਸ਼ਾ",Bihar:"ਬਿਹਾਰ",Uttarakhand:"ਉਤਰਾਖੰਡ",Assam:"ਅਸਾਮ",Chandigarh:"ਚੰਡੀਗੜ","Himachal Pradesh":"ਹਿਮਾਚਲ ਪ੍ਰਦੇਸ਼",Ladakh:"ਲੱਦਾਖ","Andaman and Nicobar Islands":"ਅੰਡੇਮਾਨ ਅਤੇ ਨਿਕੋਬਾਰ ਆਈਲੈਂਡਜ਼",Chhattisgarh:"ਛਤੀਸਗੜ",Goa:"ਜੀਓਏ",Puducherry:"ਵਿਦਿਆਕਾਰੀ",Jharkhand:"ਝਾਰਖੰਡ",Manipur:"ਮਨੀਪੁਰ",Mizoram:"ਮਿਜੋਰਮ","Arunachal Pradesh":"ਅਰਨੇਚਲ ਪ੍ਰਦੇਸ","Dadra and Nagar Haveli":"ਦਾਦਰਾ ਅਤੇ ਨਗਦ ਹਵੇਲੀ",Tripura:"ਤ੍ਰਿਪੁਰਾ","Daman and Diu":"ਦਮਨ ਅਤੇ ਦਿਉ",Lakshadweep:"ਲਕਸ਼ਦਵੀਪ",Meghalaya:"ਮੇਘਾਲਿਆ",Nagaland:"ਨਾਗਾਲੈਂਡड",Sikkim:"ਸਿੱਕਮ",STATE:"ਰਾਜ",CONFIRMED:"ਪੱਕਾ",ACTIVE:"ਕਿਰਿਆਸ਼ੀਲ",RECOVERED:"ਬਰਾਮਦ",DECEASED:"ਵਿਚਾਰਿਆ ਗਿਆ","INDIA COVID-19 TRACKER":"ਭਾਰਤ COVID-19 ਟਰੈਕਰ",LastUpdated:"ਆਖਰੀ ਅਪਡੇਟ ਕੀਤਾ "+LastUpdatedOnGlobal,Time:"ਸਮਾਂ"}};function PieChart(e){Highcharts.chart("TotalCasePie",{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"<b>CASES OF COVID - 19</b>"},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b><br>value: {point.y}"},accessibility:{point:{valueSuffix:"%"}},credits:{enabled:!1},exporting:{enabled:!1},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %<br>value: {point.y}"}}},series:[{name:"Patients",colorByPoint:!0,data:[{name:"Active",color:"#0000ff",y:e[0].Active,sliced:!0,selected:!0},{name:"Recovered",color:"#008000",y:e[0].Recovered},{name:"Deceased",color:"#808080",y:e[0].Deceased}]}]})}function PlotGraph(e){var a=JSON.parse(e),t=[],r=[],s=[],o=[],i=[],d=[],l=[];$.each(a.reverse(),function(e,a){s.push(a.dailyconfirmed),r.push(a.dailyrecovered),t.push(a.dailydeceased),o.push(moment(a.date).format("MMMM Do")),i.push(a.totalconfirmed),d.push(a.totaldeceased),l.push(a.totalrecovered)}),Highcharts.chart("DailyCaseGraph",{chart:{type:"spline"},title:{text:"<b>INDIA - DAILY CASES</b>"},credits:{enabled:!1},xAxis:{categories:o,crosshair:!0},yAxis:{min:0,title:{text:"<b>No. of cases</b>"}},tooltip:{shared:!0},exporting:{enabled:!1},plotOptions:{column:{pointPadding:.2,borderWidth:0},series:{lineWidth:3}},series:[{name:"Confirmed",data:s,color:"#ff0000"},{name:"Recovered",data:r,color:"#008000"},{name:"Deceased",data:t,color:"#808080"}]}),Highcharts.chart("TotalCaseGraph",{chart:{type:"spline"},title:{text:"<b>INDIA - TOTAL CASES</b>"},credits:{enabled:!1},exporting:{enabled:!1},xAxis:{categories:o,crosshair:!0},yAxis:{min:0,title:{text:"<b>No. of cases</b>"}},tooltip:{shared:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0},series:{lineWidth:3}},series:[{name:"Total Confirmed",data:i,color:"#ff0000"},{name:"Total Recovered",data:l,color:"#008000"},{name:"Total Deceased",data:d,color:"#808080"}]})}function PlotTested(e){for(var a="",t=0;t<e.tested.length;t++)""!=e.tested[t].samplereportedtoday&&""!=e.tested[t].positivecasesfromsamplesreported&&""!=e.tested[t].totalindividualstested&&(samplereportedtoday=e.tested[t].samplereportedtoday.replace(/,/g,""),positivecasesfromsamplesreported=e.tested[t].positivecasesfromsamplesreported.replace(/,/g,""),totalindividualstested=e.tested[t].totalindividualstested.replace(/,/g,""),totalpositivecases=e.tested[t].totalpositivecases.replace(/,/g,""),updatetimestamp=e.tested[t].updatetimestamp,source=e.tested[t].source,a=(a=(a=(a=(a=(a=(a+="{")+'"source": "'+source+'",')+'"updatetimestamp": "'+updatetimestamp+'",')+'"samplereportedtoday": '+samplereportedtoday+",")+'"positivecasesfromsamplesreported": '+positivecasesfromsamplesreported+",")+'"totalindividualstested": '+totalindividualstested+",")+'"totalpositivecases": '+totalpositivecases,a+="},");return"["+a.slice(0,a.length-1)+"]"}function PlotTestedHighchart(e){var a=JSON.parse(e),t=[],r=[],s=[];$.each(a,function(e,o){t.push(o.samplereportedtoday),e==a.length-1&&(TotalPersonTested=o.totalindividualstested,TotalPersonPositive=o.totalpositivecases),r.push(o.positivecasesfromsamplesreported),s.push(moment(o.updatetimestamp,"DD/MM/YYYY").format("MMMM Do"))}),Highcharts.chart("DailyTested",{chart:{type:"column"},title:{text:"<b>TESTED SAMPLE - DATE WISE</b>"},xAxis:{categories:s},yAxis:{min:0,title:{text:"Samples Reported"}},credits:{enabled:!1},tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',shared:!0},plotOptions:{column:{stacking:"normal"}},series:[{name:"Reported Sample For Testing",data:t,color:"blue"},{name:"Positive Cases After Testing",data:r,color:"red"}]}),TestedPieChart()}function TestedPieChart(){Highcharts.setOptions({lang:{thousandsSep:","}}),Highcharts.chart("TotalTestedPie",{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"<b>TOTAL TESTED COVID - 19</b>"},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b><br>value: {point.y}"},accessibility:{point:{valueSuffix:"%"}},credits:{enabled:!1},exporting:{enabled:!1},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %<br>value: {point.y}"}}},series:[{name:"Cases",colorByPoint:!0,data:[{name:"Total Individual Tested",color:"#0000ff",y:TotalPersonTested,sliced:!0,selected:!0},{name:"Total Individual Positive",color:"#FF0000",y:TotalPersonPositive}]}]})}function NumbersInCommaSeperated(e){var a=(e=e.toString()).substring(e.length-3),t=e.substring(0,e.length-3);return""!=t&&(a=","+a),t.replace(/\B(?=(\d{2})+(?!\d))/g,",")+a}$(function(){$(".translate").click(function(){var e=$(this).attr("id");return $(".State").each(function(a,t){$(this).text(arrLang[e][$(this).attr("key")])}),!1})});
